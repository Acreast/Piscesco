@model IEnumerable<Piscesco.Models.Order>

@using Microsoft.AspNetCore.Identity
@using Piscesco.Areas.Identity.Data

@inject UserManager<PiscescoUser> UserManager
        

@{
    ViewData["Title"] = "Index";

    Layout = "~/Views/Shared/_Layout.cshtml";
    string dateOfOrderString = ViewData["DateOfOrder"] as string;
}

<h1>Orders by date</h1>



    <div class="mb-4">
        <div class="datepicker date input-group p-0 shadow-sm">
            <input type="date" value="@dateOfOrderString" class="form-control py-4 px-4" id="orderDate">
            <button class="btn-success" id="btnSearch">Search</button>
        </div>
    </div>
    <div id="grdOrders"></div>
    

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script>
    $(() => {
        if ($('#orderDate').val() != 0) {
            getOrdersByDate();
        }
        $('#btnSearch').on('click', () => {
        getOrdersByDate();
});
    });

    function getOrdersByDate() {
        $.ajax({
            url: '@Url.Action("SearchByDate","Orders")',
            dataType: 'html',
            method: 'GET',
            data: { start: $('#orderDate').val().toString() },
            success: function (res) {
                $('#grdOrders').html('').html(res);
                
            },
            error: function (err) {
                console.log(err);
            }
        });
    }

</script>
